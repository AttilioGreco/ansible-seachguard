---
# memcache_list_server: groups['server_group_memcache']

keyring_host: localhost
remote_keyring_host_user: root
seach_guard_path_base: /var/seachguard
seach_guard_path_download: "{{ seach_guard_path_base }}/download"
# Elasticseach cluster status
# install elasticseach
elasticseach_not_installed: true
# if elasticseach is running stop cluster
elasticseach_full_cluster_stop: false
elasticsearch_plugin_path: /usr/share/elasticsearch/bin/elasticsearch-plugin

seach_guard_path_offline_tls_tool: "{{ seach_guard_path_base }}/offline-tls-tool"
# Certifcate Path
seach_guard_path_cert: "{{ seach_guard_path_base }}/cert"
seach_guard_path_cert_ca: "{{ seach_guard_path_cert }}/ca"
seach_guard_path_cert_nodes: "{{ seach_guard_path_cert }}/node"
seach_guard_path_cert_node: "{{ seach_guard_path_cert_nodes }}/{{ ansible_hostname }}"
seach_guard_path_cert_client: "{{ seach_guard_path_cert }}/client"

seach_guard_path_etc: /etc/seachguard
seach_guard_path_config: "{{seach_guard_path_etc}}/conf"
seach_guard_path_config_ca: "{{seach_guard_path_config}}/ca"
seach_guard_path_config_node: "{{seach_guard_path_config}}/node"
seach_guard_path_config_client:  "{{seach_guard_path_config}}/client"

elasticsearch_ssl_path: /etc/elasticsearch/cert
# Seachguard Create
seach_guard_create_dir_list:
  - "{{ seach_guard_path_base }}"
  - "{{ seach_guard_path_offline_tls_tool }}"
  - "{{ seach_guard_path_download }}"
  - "{{ seach_guard_path_cert }}"

  - "{{ seach_guard_path_cert_ca }}"
  - "{{ seach_guard_path_cert_node }}"
  - "{{ seach_guard_path_cert_client }}"

  - "{{ seach_guard_path_etc }}"
  - "{{ seach_guard_path_config }}"
  - "{{ seach_guard_path_config_ca }}"
  - "{{ seach_guard_path_config_node }}"
  - "{{ seach_guard_path_config_client }}"

seach_guard_download_url: "https://search.maven.org/remotecontent?filepath=com/floragunn/search-guard-tlstool/1.7/search-guard-tlstool-1.7.zip"
seach_guard_download_sgtool: "https://oss.sonatype.org/service/local/repositories/releases/content/com/floragunn/search-guard-7/7.3.1-36.1.0/search-guard-7-7.3.1-36.1.0-sgadmin-standalone.zip"
# seach_guard_nodes_list: "{{ groups['elk'] }}"
seach_guard_use_autogenerated_configurations: true
seach_guard_plugin_download_url: https://releases.floragunn.com/search-guard-7-7.3.1-36.1.0.zip
seach_guard_plugin_path: 

seach_guard_basic_domain:
  cn: root.ca.agreco.it
  ou: CA
  o: Agreco \, Inc.
  dc1: agreco
  dc2: it

search_guard_ca:
  root:
     dn: CN={{ seach_guard_basic_domain.cn }},OU={{ seach_guard_basic_domain.ou }},O={{ seach_guard_basic_domain.o }},DC={{ seach_guard_basic_domain.dc1 }},DC={{ seach_guard_basic_domain.dc2 }}
     keysize: 2048
     validityDays: 3650
     pkPassword: V3r1s3cr3tp4ssw0rd
     file: root-ca.pem
#  intermediate:
#     dn: CN={{seach_guard_basic_domain.cn}},OU={{seach_guard_basic_domain.cn}},O={{ seach_guard_basic_domain.o }},DC={{seach_guard_basic_domain.dc1}},DC={{seach_guard_basic_domain.dc2}}
#     keysize: 2048
#     validityDays: 3650
#     pkPassword: Wn3mYapVXLbAVe4
#     crlDistributionPoints: URI:https://raw.githubusercontent.com/floragunncom/unittest-assets/master/revoked.crl

search_guard_nodes:
  root:
     dn: "{{ search_guard_ca.root.dn }}"
     keysize: "{{ search_guard_ca.root.keysize }}"
     validityDays: "{{ search_guard_ca.root.validityDays }}"
     pkPassword: "{{ search_guard_ca.root.pkPassword }}"
     file: "{{ search_guard_ca.root.file }}"
  defaults:
        validityDays: 750
        pkPassword: V3r1s3cr3tp4ssw0rd
        generatedPasswordLength: 12
        httpsEnabled: true
  node:
    name: "{{ ansible_hostname }}"
    cn: "CN={{ ansible_fqdn }},OU=Ops,O={{ seach_guard_basic_domain.o }},DC={{ seach_guard_basic_domain.dc1 }},DC={{ seach_guard_basic_domain.dc2 }}"
    dns: 
      - "{{ ansible_hostname }}"
      - "{{ ansible_fqdn }}"
    ip: "{{ ansible_default_ipv4.address }}"

search_guard_client:
  clients:
    - name: test
      dn: CN=test.agreco.it,OU=Client,O={{ seach_guard_basic_domain.o }},DC={{ seach_guard_basic_domain.dc1 }},DC={{ seach_guard_basic_domain.dc2 }}"
      admin: true

